



#### Steps to run using AWS Amplify

1. [Install Amplify CLI on your local machine](https://docs.amplify.aws/cli/start/install/#pre-requisites-for-installation)

```
   npm install -g @aws-amplify/cli
```

2. [Configure Amplify CLI](https://docs.amplify.aws/start/getting-started/installation/q/integration/angular/#configure-the-amplify-cli)

```
   amplify configure
```

3. Clone this project

```
   git clone <TODO add path>
```

4. Open a new terminal. From the root of the project, run:

```
   amplify init
```

![amplify_init]

5. Install Project dependencies. Fire the below command in a terminal from the root of your project foler

```
   npm install
```

6. Add Cognito Authentication. Fire the below command in a terminal from the root of your project folder

```
  amplify add auth
```

![amplify_add_auth]

7. Push your changes

```
  amplify push
```

8. If you have already added auth, you can skip this step 4 - 7.
```
amplify pull
```

and then select select AWS access keys, and then select the region you have created the auth

9. Verify if aws-exports.ts file has all the Auth details. We reference properties from this file when generating creadentials to communicate with Amazon Rekognition.
   ![amplify_exportjs]

10. Update IAM permissions. Search for IAM role of type 'amplify-**{your-app-name}-{environment}-{random-number}**-authRole' generated by amplify and add the below inline policy that supports liveness detection features

```
   {
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": "rekognition:StartFaceLivenessSession",
            "Resource": "*"
        },
        {
            "Effect": "Allow",
            "Action": "rekognition:CreateFaceLivenessSession",
            "Resource": "*"
        },
        {
            "Effect": "Allow",
            "Action": "rekognition:GetFaceLivenessSessionResults",
            "Resource": "*"
        }
    ]
}
```

![amplify_auth_role]
![amplify_attach_policy]

11. To run on local machine

```
   npm run dev or yarn dev
```

12. To view the hosted application on Amplify

```
   amplify console
```

13. Once you create an account and login you should see the below screen
    ![main_screen]

14. Click on **Begin Check** for automated liveness detection
    ![challenge1]

15. Wait for verification. This service gives you a confidence score for face liveness.
    ![verification]